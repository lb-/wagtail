{% extends "wagtailadmin/skeleton.html" %}
{% load i18n wagtailadmin_tags %}

{% block css %}
    <link rel="stylesheet" href="{% versioned_static 'wagtailadmin/css/core.css' %}">

    {% hook_output 'insert_global_admin_css' %}
    {% hook_output 'insert_editor_css' %}

    {% block extra_css %}{% endblock %}
{% endblock %}

{% block meta %}
    <meta name="ACTIVE_CONTENT_LOCALE" content="{% if locale %}{{ locale.language_code|escapejs }}{% endif %}" data-wagtail-metadata-item/>
    <meta name="CSRF_TOKEN" content="{{ csrf_token|escapejs }}" data-wagtail-metadata-item/>
    <meta name="CSRF_HEADER_NAME" content="" data-wagtail-metadata-item/>
    <meta name="I18N_ENABLED" content="{% if i18n_enabled %}true{% else %}false{% endif %}" data-wagtail-metadata-item="boolean"/>
    <meta name="ADMIN_API.PAGES" content="{% url 'wagtailadmin_api:pages:listing' %}" data-wagtail-metadata-item/>
    <meta name="ADMIN_API.DOCUMENTS" content="'{% url 'wagtailadmin_api:documents:listing' %}" data-wagtail-metadata-item/>
    <meta name="ADMIN_API.IMAGES" content="{% url 'wagtailadmin_api:images:listing' %}" data-wagtail-metadata-item/>
    <meta name="ADMIN_API.EXTRA_CHILDREN_PARAMETERS" content="" data-wagtail-metadata-item/>
    <meta name="ADMIN_URLS.PAGES" content="{% url 'wagtailadmin_explore_root' %}" data-wagtail-metadata-item/>
    <meta name="ADMIN_URLS.DISMISSIBLES" content="{% url 'wagtailadmin_dismissibles' %}" data-wagtail-metadata-item/>
    {% locales as locales %}
    <meta name="LOCALES" content='{{ locales|safe }}' data-wagtail-metadata-item="json"/>
    <meta name="MAX_EXPLORER_PAGES" content="200" data-wagtail-metadata-item="number"/>
{% endblock %}

{% block branding_favicon %}
    <link rel="shortcut icon" href="{% versioned_static 'wagtailadmin/images/favicon.ico' %}" />
{% endblock %}

{% block js %}
    <script src="{% versioned_static 'wagtailadmin/js/metadata.js' %}" data-wagtail-metadata="data-wagtail-metadata-item"></script>
    <script>
        // note: with the above metadata approach - we should no longer need any of the items below
        (function(document, window) {
            window.wagtailConfig = window.wagtailConfig || {};
            wagtailConfig.ADMIN_API = {
                PAGES: '{% url "wagtailadmin_api:pages:listing" %}',
                DOCUMENTS: '{% url "wagtailadmin_api:documents:listing" %}',
                IMAGES: '{% url "wagtailadmin_api:images:listing" %}',
                {# // Use this to add an extra query string on all API requests. #}
                {# // Example value: '&order=-id' #}
                EXTRA_CHILDREN_PARAMETERS: '',
            };

            {% i18n_enabled as i18n_enabled %}
            {% locales as locales %}
            wagtailConfig.I18N_ENABLED = {% if i18n_enabled %}true{% else %}false{% endif %};
            wagtailConfig.LOCALES = {{ locales|safe }};

            {% if locale %}
                wagtailConfig.ACTIVE_CONTENT_LOCALE = '{{ locale.language_code }}'
            {% endif %}

            wagtailConfig.STRINGS = {% js_translation_strings %};

            wagtailConfig.ADMIN_URLS = {
                PAGES: '{% url "wagtailadmin_explore_root" %}'
            };
            console.log('wagtailConfig', wagtailConfig);
        })(document, window);
    </script>
    {% wagtail_config as config %}
    {{ config|json_script:"wagtail-config" }}
    <script src="{% versioned_static 'wagtailadmin/js/vendor/jquery-3.6.0.min.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/vendor/jquery-ui-1.13.2.min.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/vendor/jquery.datetimepicker.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/vendor/jquery.autosize.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/vendor/bootstrap-transition.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/vendor/bootstrap-modal.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/vendor/tag-it.js' %}"></script>
    <script src="{% url 'wagtailadmin_javascript_catalog' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/core.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/vendor.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/wagtailadmin.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/telepath/telepath.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/sidebar.js' %}"></script>

    {% hook_output 'insert_global_admin_js' %}

    {% block extra_js %}{% endblock %}
{% endblock %}
